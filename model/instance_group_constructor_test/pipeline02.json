{
  "resources": [
    {
      "name": "pipeline01-it",
      "type": "compute.v1.instanceTemplate",
      "properties": {
        "zone": "us-central1-f",
        "properties": {
          "machineType": "f1-micro",
          "networkInterfaces": [
            {
              "network": "https://www.googleapis.com/compute/v1/projects/dummy-proj-999/global/networks/default",
              "accessConfigs": [
                {
                  "name": "External-IP",
                  "type": "ONE_TO_ONE_NAT"
                }
              ]
            }
          ],
          "disks": [
            {
              "deviceName": "boot",
              "type": "PERSISTENT",
              "boot": true,
              "autoDelete": true,
              "initializeParams": {
                "sourceImage": "https://www.googleapis.com/compute/v1/projects/ubuntu-os-cloud/global/images/family/ubuntu-1604-lts"
              }
            }
          ],
          "guestAccelerators":
          [
            {
              "acceleratorCount": 2,
              "acceleratorType": "nvidia-tesla-p100"
            }
          ],
	        "scheduling": {
            "onHostMaintenance": "TERMINATE",
						"preemptible": false
					},
          "serviceAccounts": [
            {
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.full_control",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/cloud-platform"
              ]
            }
          ],
          "metadata": {
            "items": [
              {
                "key": "startup-script",
                "value": ""
              }
            ]
          }
        }
      }
    },
    {
      "name": "pipeline01-igm",
      "type": "compute.v1.instanceGroupManagers",
      "properties": {
        "baseInstanceName": "pipeline01-instance",
        "instanceTemplate": "$(ref.pipeline01-it.selfLink)",
        "targetSize": 2,
        "zone": "us-central1-f"
      }
    }
  ]
}
