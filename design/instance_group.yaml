anchors:
- &string_required
  type: string
  required: true
- &time_required
  type: time.Time
  required: true

types:
  InstanceGroupStatus:
    base: string
    enum: "definitions/Instance-Group/properties/status/enum"
  InstanceGroupVMDisk:
    media_type: InstanceGroupVmDisk
    fields:
      DiskSizeGb: int
      DiskType: {}
      SourceImage: *string_required
  InstanceGroupAccelerators:
    fields:
      Count: int
      Type: {}
  InstanceGroupHealthCheckConfig:
    fields:
      Interval: int
      MinimumRunningSize: int
      MinimumRunningPercentage: int
  InstanceGroupBody:
    fields: &InstanceGroupBodyFields
      BootDisk:
        type: InstanceGroupVMDisk
        required: true
      MachineType: *string_required
      GpuAccelerators: InstanceGroupAccelerators
      HealthCheck: InstanceGroupHealthCheckConfig
      Preemptible: bool
      InstanceSizeRequested: int
      StartupScript: {}
      DeploymentName: {}
      TokenConsumption: int
  InstanceGroup:
    goon:
      # id_type: int64
      # id_type: string
      # id_type: UUID (type: string)
      id_name: Name
      id_type: string
      parent: Organization
    # payload: InstanceGroupPayload
    media_type: Instance-Group
    fields:
      ProjectID: *string_required
      Zone: *string_required
      <<: *InstanceGroupBodyFields
      InstanceSize: int
      HealthCheckId: string
      Status:
        type: InstanceGroupStatus
        required: true
      CreatedAt: *time_required
      UpdatedAt: *time_required
  InstanceGroupHealthCheck:
    goon:
      id_type: int64
      parent: InstanceGroup
    media_type: "Instance-Group-Health-Check"
    fields:
      LastResult: string
      CreatedAt: *time_required
      UpdatedAt: *time_required
